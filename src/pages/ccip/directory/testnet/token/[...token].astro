---
export const prerender = false

import Token from "~/components/CCIP/Token/Token.astro"
import { Environment, getAllSupportedTokens, Version } from "~/config/data/ccip"
import { getTokenIconUrl } from "~/features/utils"

// Handle dynamic routing
const { token } = Astro.params
const environment = Environment.Testnet

// Get supported tokens dynamically
const supportedTokens = getAllSupportedTokens({
  environment,
  version: Version.V1_2_0,
})

// Check if token exists
if (!supportedTokens[token]) {
  return Astro.redirect("/404")
}

const logo = getTokenIconUrl(token)
---

<Token token={token} logo={logo} environment={environment} />
