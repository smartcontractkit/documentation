---
import { PageTabs } from "@components"

// Get current page URL to determine if we should show deprecated schemas
const currentUrl = Astro.url.pathname

const allReportSchemaPages = [
  {
    name: "Report Schema v3 (Crypto)",
    url: "/data-streams/reference/report-schema-v3",
  },
  {
    name: "Report Schema v3 (DEX State Price)",
    url: "/data-streams/reference/report-schema-v3-dex",
  },
  {
    name: "Report Schema v4 (RWA, deprecated)",
    url: "/data-streams/reference/report-schema-v4",
    deprecated: true,
  },
  {
    name: "Report Schema v7 (Exchange Rate)",
    url: "/data-streams/reference/report-schema-v7",
  },
  {
    name: "Report Schema v8 (RWA)",
    url: "/data-streams/reference/report-schema-v8",
  },
  {
    name: "Report Schema v11 (RWA+)",
    url: "/data-streams/reference/report-schema-v11",
  },
  {
    name: "Report Schema v9 (NAV)",
    url: "/data-streams/reference/report-schema-v9",
  },
  {
    name: "Report Schema v10 (Backed xStock)",
    url: "/data-streams/reference/report-schema-v10",
  },
]

// Only show deprecated schemas if user is currently on a deprecated page
const isOnDeprecatedPage = allReportSchemaPages.some((page) => page.deprecated && currentUrl === page.url)

const reportSchemaPages = allReportSchemaPages.filter((page) => !page.deprecated || isOnDeprecatedPage)
---

<PageTabs
  pages={reportSchemaPages}
  headerTitle="Available Report Schemas"
  headerDescription="Choose the schema version you want to explore."
/>
