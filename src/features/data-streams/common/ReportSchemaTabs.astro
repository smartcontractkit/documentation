---
import { PageTabs } from "@components"

// Get current page URL to determine if we should show deprecated schemas
const currentUrl = Astro.url.pathname

const allReportSchemaPages = [
  {
    name: "Cryptocurrency Report Schema (v3)",
    url: "/data-streams/reference/report-schema-v3",
  },
  {
    name: "DEX State Price Report Schema (v3)",
    url: "/data-streams/reference/report-schema-v3-dex",
  },
  {
    name: "(Deprecated) RWA Report Schema (v4)",
    url: "/data-streams/reference/report-schema-v4",
    deprecated: true,
  },
  {
    name: "Exchange Rate Report Schema (v7)",
    url: "/data-streams/reference/report-schema-v7",
  },
  {
    name: "RWA Report Schema (v8)",
    url: "/data-streams/reference/report-schema-v8",
  },
  {
    name: "NAV Report Schema (v9)",
    url: "/data-streams/reference/report-schema-v9",
  },
  {
    name: "Backed xStock Report Schema (v10)",
    url: "/data-streams/reference/report-schema-v10",
  },
]

// Only show deprecated schemas if user is currently on a deprecated page
const isOnDeprecatedPage = allReportSchemaPages.some((page) => page.deprecated && currentUrl === page.url)

const reportSchemaPages = allReportSchemaPages.filter((page) => !page.deprecated || isOnDeprecatedPage)
---

<PageTabs
  pages={reportSchemaPages}
  headerTitle="Available Report Schemas"
  headerDescription="Choose the schema version you want to explore."
/>
