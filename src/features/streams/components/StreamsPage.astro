---
import { FeedList, DataFeedType } from "@features/feeds/components/FeedList"
import { Aside } from "@components"
export type Props = {
  initialNetwork?: string
  ecosystem?: string
  dataFeedType?: DataFeedType
  allowNetworkTableExpansion?: boolean
  defaultNetworkTableExpanded?: boolean
}
import { getServerSideChainMetadata } from "~/features/data/api/backend"
import { CHAINS, ALL_CHAINS } from "~/features/data/chains"

const { initialNetwork, ecosystem, dataFeedType, allowNetworkTableExpansion, defaultNetworkTableExpanded } = Astro.props

// Skip cache for deprecating page to always fetch fresh data
const isDeprecating = ecosystem === "deprecating"
const initialCache = await getServerSideChainMetadata([...CHAINS, ...ALL_CHAINS], isDeprecating)
---

{
  ecosystem === "deprecating" ? (
    <>
      <p>
        Due to the rapid evolution of onchain ecosystems, Chainlink Data Streams feeds are regularly evaluated to ensure
        that network usage, cost efficiency, and long-term sustainability remain aligned with the needs of the
        ecosystem.
      </p>
      <p>
        As part of this ongoing evaluation, Data Streams feeds without publicly known active users may be scheduled for
        deprecation. Doing so not only allows us to keep our Data Streams offering aligned with today's market
        landscape, but it also helps to reduce unnecessary costs incurred by Chainlink node operators. This process is
        part of a broader ecosystem initiative to maximize the adoption of the Chainlink network while optimizing for
        cost-efficiency and long-term economic sustainability.
      </p>
      <p>
        For status updates regarding Data Streams and Data Feeds, users should join the official{" "}
        <a href="https://chain.link/discord">Chainlink Discord</a> and subscribe to the{" "}
        <a href="https://discord.gg/Dqy5N9UbsR">data-feeds-user-notifications channel</a>.
      </p>
      <p>
        A list of Data Streams feeds designated for deprecation, along with their corresponding shutdown date, can be
        found below.
      </p>
      <Aside type="note" title="Reactivation">
        <p>
          <strong>Deprecated Data Streams feeds can be reactivated at any time should new demand emerge</strong>. Teams
          interested in re-enabling a deprecated Data Streams feed (or requesting a new one) can{" "}
          <a href="https://chainlinkcommunity.typeform.com/datastreams?#ref_id=docs">reach out</a> to discuss
          requirements, expected usage, and deployment timelines.
        </p>
        <p>
          Always use caution and perform proper due diligence before integrating Chainlink Data Streams into your
          application. Review our <a href="/data-streams/concepts/best-practices">Data Streams Best Practices</a> to
          help manage risks, optimize performance, and ensure compliance with market standards.
        </p>
      </Aside>
    </>
  ) : (
    <>
      <p>
        To learn how to use Data Streams, see the{" "}
        <a href="/data-streams/tutorials/go-sdk-fetch">Fetch and decode reports</a> tutorial.
      </p>
      <p>
        For LINK token and Faucet details, see the{" "}
        <a href="/resources/link-token-contracts?parent=dataFeeds">LINK Token Contracts</a> page.
      </p>

      <Aside type="note" title="Talk to an expert">
        <p>
          <a href="https://chainlinkcommunity.typeform.com/datastreams?#ref_id=docs">Contact us</a> to talk to an expert
          about integrating Chainlink Data Streams with your applications.
        </p>
      </Aside>
    </>
  )
}

<FeedList
  client:idle
  initialNetwork={initialNetwork ?? "arbitrum"}
  dataFeedType={dataFeedType ?? "streamsCrypto"}
  ecosystem={ecosystem ?? ""}
  initialCache={initialCache}
  allowNetworkTableExpansion={allowNetworkTableExpansion}
  defaultNetworkTableExpanded={defaultNetworkTableExpanded}
/>
