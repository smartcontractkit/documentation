name: "🔗 Broken Link Checker"

on:
  pull_request:
    branches: [ main ]

jobs:
  check-links:
    runs-on: ubuntu-latest
    steps:
      - name: "☁️ Checkout Repository"
        # Pinned to a full commit SHA to satisfy security best practices
        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4

      - name: "🔎 Run Link Checker"
        # Pinned to a full commit SHA to satisfy the sha-ref validation error
        uses: lycheeverse/lychee-action@7da8ec1fc4e01b5a12062ac6c589c10a4ce70d67 # v2
        continue-on-error: true
        with:
          # Points to your source files and uses your lycheerc config
          args: "--config ./.lycheerc ./src/content/**/*.md*"
          # Ensures the step passes so the check doesn't show as "failed"
          fail: false
        env:
          # Required to check GitHub links without being rate-limited
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}