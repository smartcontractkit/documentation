---
layout: nodes.liquid
section: ethereum
date: Last Modified
title: 'Keepers Job Scheduler'
whatsnext:
  {
    'FAQs': '/docs/chainlink-keepers/faqs/',
  }
---

# Overview
This guide outlines how you can quickly set up a time schedule to automatically execute your smart contracts using the Chainlink Keepers Job Scheduler.

**Table of Contents**

+ [Overview](#overview)
+ [Job Scheduler Overview](#cronupkeepfactory-overview)
+ [Job Scheduling Tutorial](#job-scheduling-tutorial)
+ [Useful Patterns and Best Practices](#useful-patterns-and-best-practices)


# Job Scheduler Overview

With the Job Scheduler you can schedule jobs to automatically execute your smart contract functions at specific times using the Chainlink Keepers network. Simply specify the address of your target contract, the function to execute, and the execution time(s) to create a new scheduled job and then register your Job Scheduler with Chainlink Keepers to enable the decentralized Keepers network to start monitoring and executing your jobs.  

# Job Scheduling Tutorial

We will be using [Remix](https://remix.ethereum.org/) for this tutorial. To learn more about Remix and how you can use it to deploy a smart contract, visit our [tutorial](https://www.youtube.com/watch?v=JWJWT9cwFbo).

You will also need a MetaMask (or other Remix compatible wallet) in your browser with some testnet tokens of choice. See our [MetaMask tutorial](https://www.youtube.com/watch?v=4ZgFijd02Jo) if you need help setting up a wallet.

## Creating your own Job Scheduler contract

To create your own on-chain Job Scheduler contract (called ), we will use the externally audited and pre-deployed [CronUpkeepFactory](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/factories/CronUpkeepFactory.sol) smart contract to deploy a new smart contract. This is called the [Factory pattern](https://www.youtube.com/watch?v=Q1zZo4O_Ong), where one contract deploys another contract. To generate a new Job Scheduler for you called `CronUpkeep`, select the new file icon in Remix, name it `CronUpkeepFactory.abi` and paste the ABI for `CronUkeepFactory`. The ABI is the application binary interface that is used to interact with the smart contract that has been deployed to the network.

![Remix ABI Cron](/images/keepers/cron-1.png)

Select the **DEPLOY & RUN TRANSACTIONS** icon on the left and set **Environment** to *Injected Web3*. Paste the address of your deployed `CronUpkeepFactory` contract in the **At Address** box and select the **At Address** button. You can find the addresses for `CronUpkeepFactory` [below](#contract-addresses). Once this step is completed, you will be able to view callable functions. Select the orange `newCronUpkeep` button and follow the prompts to confirm the transaction. Once the transaction is complete you should see a transaction hash in the terminal

## Finding the address of your Job Scheduler

Please copy the transaction hash of your transaction, and open it in the scanner of the chain you are working on. Now select the *Internal Txns* tab. This will show what happened during this transaction and it will contain the address of our Job Scheduler (or CronUpkeep). Please note the address and transaction hash for future use.

![Remix Transaction Hash](/images/keepers/cron-2.png)

## Interacting with your Job Scheduler

To interact with your Job Scheduler contract, create a new file called `CronUpkeep.abi` in Remix and paste the ABI for `CronUpkeep` contract from the Resources section below. Select the **DEPLOY & RUN TRANSACTIONS** icon on the left and paste the address of your `CronUpkeep` contract in the **At Address** box, and then select the **At Address** button. Please accept the prompts after which the contract interface will open in the bottom left of Remix.

![Remix Contract Interface](/images/keepers/cron-3.png)

## Using Job Scheduler to schedule a job

To schedule a new job, use the function `createCronJobFromEncodedSpec`. This function has three inputs: 

+ The target address of the smart contract you want to automate
+ The [function signature](#function-signature), or the encoding of the function, you want to call 
+ The [encodedCronSpec](#encodedcronspec), which is an encoding of your specified time interval.

Please see each of the sections below to get the function signature and the encodedCronSpec. 

We will now paste 
```json
<your target address>, <your function specification>, <your encodedCronSpec>
```
into the into the createCronJobFromEncodedSpec function and execute it. Once executed, you can call the getActiveCronJobIDs to see if your job has been registered. You can execute the getCronJob function to see the details of your job played back. You can add multiple jobs on this contract in this fashion, and also use the other functions in your Job Scheduler to delete jobs or pause the scheduler.

[[To do insert picture!!!!!!!]]

While the job has been scheduled, you still have to register your Job Scheduler with the Chainlink Keepers service to have it monitored. 

## Setting up Chainlink Keepers

To register your Job Scheduler with Chainlink Keepers, please go to [https://keepers.chain.link/](https://keepers.chain.link/) and select Connect Your Wallet. Ensure your MetaMask is connected to the network where you deployed your Job Scheduler. Select Register new Upkeep and provide the requested details. Be sure to provide the address of your Job Scheduler contract in Upkeep address. For Gas limit you should specify the upper limit of Gas your target function will use.

[[To do paste some image!!!!!]]


Once registered you can view your Upkeep. The Upkeep History will show Perform Upkeep for all registerd jobs on your Job Scheduler contract. To ensure Chainlink Keepers monitors your Job Scheduler, please ensure you fund your Upkeep.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0aac6f1d-7d46-47f0-8680-a816a73c06a2/Untitled.png)


### Function Signature
The Function Signature (or bytes handler) the the first four bytes of the Keccak-hash which is used in EVM chains to encode the function. You can use Python (>3.6) to get the function specification and by doing this ahead of time you save the gas cost of repeatedly converting the function name into the Function Signature.

```{python}
#Install pycryptodome from https://pypi.org/project/pycryptodome/
#pip install pycryptodome 
from Crypto.Hash import keccak
import binascii

#Our example smart contract function is called increment()
#and remember to include the brackets
#Note Job Scheduler will not pass a parameter
functionToEncode = 'increment()'

#Calculate the Hash
functionEncoding = keccak.new(data=functionToEncode.encode('UTF-8'), digest_bits=256).digest()

#Decode to UTF-8 and return first 4 bits (8 characters)
functionSig = binascii.hexlify(functionEncoding).decode('UTF-8')[:8]
print("Function Signature:", functionSig)
#Should return Function Signature: d09de08a
```

### EncodedCronSpec
The Spec is our time interval specification, and to minimize the amount of string handling that our smart contract has to do, we will encode it.

```json
Cron jobs are interpreted according to this format:

  ┌───────────── minute (0 - 59)
  │ ┌───────────── hour (0 - 23)
  │ │ ┌───────────── day of the month (1 - 31)
  │ │ │ ┌───────────── month (1 - 12)
  │ │ │ │ ┌───────────── day of the week (0 - 6) (Monday to Sunday)
  │ │ │ │ │
  │ │ │ │ │
  │ │ │ │ │
  * * * * *

  Special limitations:
    * there is no year field
    * no special characters: ? L W #
    * lists can have a max length of 26
    * no words like JAN / FEB or MON / TUES
    * No <division operators> (eg */5 * * * *) ** TO BE CHECKED
*/
```

If we want to create a job that runs every hour we specify the spec as “0 * * * *”. For a job that runs every weekday at 9am we specify the spec as “0 9 * * 0-4”. For a job that runs at 5pm on Monday, Wednesday, and Friday we specify the spec as “0 17 * * 0,2,4”.

We want our contract to execute every 5 minutes and encode the following spec 

```json
"0,5,10,15,20,25,30,35,40,45,50,55 * * * *"
```

Paste this spec into the cronStringToEncodeSpec function in Remix and run the function. This will produce the following result.

```json
0x00000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000019000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000230000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002d000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
```


# Useful Patterns and Best Practices

## Contract Addresses

| Chain name               | Factory address                            |   |   |   |
|--------------------------|--------------------------------------------|---|---|---|
| Ethereum Mainnet         | 0x9Da0C828dd778917Ca19EbAcfeADc2C0411BF18F |   |   |   |
| Ethereum Kovan           | 0x8ed750705F8c0E5Cb56C1bF50Df6626Dc06553f1 |   |   |   |
| BSC Mainnet              | TBD                                        |   |   |   |
| BSC Testnet              | TBD                                        |   |   |   |
| Polygon Mainnet          | 0x72d17B985D2CAD363eA05F84D600d80ea8D0Fa15 |   |   |   |
| Polygon Testnet (Mumbai) | 0x9BfA401b5912D6d6EBd8dB03139d5C7861FBC7f3 |   |   |   |